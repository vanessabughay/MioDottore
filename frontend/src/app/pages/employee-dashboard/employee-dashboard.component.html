<div class="employee-dashboard">
  <h2>Bem-vindo(a), {{ nome }}!</h2>

  <div class="top-actions">
    <button (click)="cadastrarConsulta()">Cadastrar Nova Consulta</button>
    <button (click)="gerenciarFuncionarios()">Gerenciar Funcionários</button>
    <button (click)="logout()">Logout</button>
  </div>

  <h3>Consultas Agendadas (Próximas 48h)</h3>

  <table>
    <thead>
      <tr>
        <th>Data/Hora</th>
        <th>Especialidade</th>
        <th>Médico</th>
        <th>Paciente</th>
        <th>Status</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of consultas">
        <td>{{ c.dataHora | date:'dd/MM/yyyy HH:mm' }}</td>
        <td>{{ c.especialidade }}</td>
        <td>{{ c.medico }}</td>
        <td>{{ c.paciente }}</td>
        <td>{{ c.status }}</td>
        <td>
          <button *ngIf="c.status === 'CHECK-IN'" (click)="confirmarPresenca(c)">
            Confirmar Presença
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="consulta-opcoes" *ngIf="consultasDisponiveis.length">
    <label for="consultaSelect">Selecione uma consulta:</label>
    <select id="consultaSelect" (change)="onSelectChange($event)">
  <option value="">-- Selecione --</option>
  <option *ngFor="let c of consultasDisponiveis" [value]="c.codigo">
    {{ c.especialidade.nome }} - {{ c.medicoNome }} - {{ c.dataHora | date:'dd/MM/yyyy HH:mm' }}

  </option>
</select>


    <div *ngIf="consultaSelecionada">
      <h4>Consulta Selecionada:</h4>
      <p>
        {{ consultaSelecionada.especialidade.nome }} com
        {{ consultaSelecionada.medicoNome }} –
        {{ consultaSelecionada.dataHora | date:'short' }}
      </p>
      <p>
        Vagas Ocupadas:
        {{ consultaSelecionada.vagas - consultaSelecionada.vagasDisponiveis }}/{{ consultaSelecionada.vagas }}
      </p>

      <button (click)="cancelarConsulta()">Cancelar Consulta</button> 
      <button (click)="realizarConsulta()">Realizar Consulta</button>
    </div>
  </div>
</div>
